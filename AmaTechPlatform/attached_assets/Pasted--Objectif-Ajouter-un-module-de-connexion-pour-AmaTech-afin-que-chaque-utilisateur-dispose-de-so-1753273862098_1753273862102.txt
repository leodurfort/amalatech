ğŸ§  Objectif : Ajouter un module de connexion pour AmaTech, afin que chaque utilisateur dispose de son propre compte, voie les dossiers sur lesquels il travaille en prioritÃ©, et accÃ¨de en lecture aux autres dossiers.

ğŸ§± Stack :
- Frontend : React
- Backend : Node.js (Express ou Next.js API)
- Auth : Clerk (ou Auth0 / Supabase Auth si besoin)
- BDD : Prisma + SQLite
- Langue : FranÃ§ais ğŸ‡«ğŸ‡·

---

## ğŸ” Authentification

Mettre en place un module de connexion par email (passwordless ou avec mot de passe).

- Stocker les utilisateurs dans une table `Utilisateur`
- Chaque utilisateur peut Ãªtre **assignÃ© Ã  1 ou plusieurs dossiers**
- Les dossiers sont classÃ©s Ã  l'Ã©cran selon l'implication de l'utilisateur

---

## ğŸ§± SchÃ©ma de donnÃ©es Ã©tendu (Prisma)

```prisma
model Utilisateur {
  id          String   @id @default(uuid())
  nom         String
  email       String   @unique
  mot_de_passe String? // selon stratÃ©gie dâ€™auth
  created_at  DateTime @default(now())

  dossiers    DossierMembre[]
  interactions Interaction[] @relation("AuteurInteractions")
}

model Dossier {
  id             String   @id @default(uuid())
  nom            String
  type           DossierType
  statut         DossierStatut
  date_debut     DateTime
  date_cloture   DateTime?
  description    String?
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt

  membres        DossierMembre[]
  societes       Societe[]
  interactions   Interaction[]
}

model DossierMembre {
  id            String   @id @default(uuid())
  utilisateur_id String
  dossier_id     String
  role           String // ex : "responsable", "collaborateur", etc.

  utilisateur   Utilisateur @relation(fields: [utilisateur_id], references: [id])
  dossier       Dossier     @relation(fields: [dossier_id], references: [id])

  @@unique([utilisateur_id, dossier_id])
}
ğŸ–¥ï¸ Comportement frontend (React)
Lors de la connexion :
RÃ©cupÃ©rer lâ€™id de lâ€™utilisateur via lâ€™auth

Faire un GET /api/dossiers?membre=true pour afficher :

Dossiers oÃ¹ je suis assignÃ© (onglet "Mes Dossiers")

Autres dossiers accessibles (onglet "Autres Dossiers")

Exemple de vue Accueil :
diff
Copier
Modifier
Bienvenue Jean Dupont

ğŸ“‚ Mes Dossiers
- Cession TechCo
- Acquisition BioPharma

ğŸ“ Autres Mandats
- LevÃ©e Series B - MedX
- Sell-side FintechCo
ğŸ§° API Ã  crÃ©er
POST /api/login â†’ Connexion utilisateur

GET /api/utilisateur â†’ Infos utilisateur connectÃ©

GET /api/dossiers?membre=true â†’ Dossiers assignÃ©s Ã  l'utilisateur

GET /api/dossiers?membre=false â†’ Tous les autres dossiers

POST /api/dossiers/:id/assigner â†’ Ajouter un membre Ã  un dossier

âœ¨ Bonus (non obligatoire au dÃ©part)
Champ role dans DossierMembre pour moduler les droits (ex : lecture seule, contributeur, responsable)

Historisation : toutes les Interaction ou Note enregistrent auteur_id pour savoir qui a agi

Notifications sur les dossiers suivis

ğŸ§  RÃ©sumÃ© UX
Je me connecte

Je vois dâ€™abord les dossiers sur lesquels je travaille

Je peux naviguer vers d'autres dossiers si besoin

Lâ€™interface est personnalisÃ©e et filtrÃ©e dÃ¨s le login

