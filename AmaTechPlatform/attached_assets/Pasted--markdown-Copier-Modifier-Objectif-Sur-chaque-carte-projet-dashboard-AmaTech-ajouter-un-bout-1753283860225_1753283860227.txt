
markdown
Copier
Modifier
ğŸ¯ Objectif :
Sur chaque carte projet (dashboard AmaTech), ajouter un bouton `...` (3 points verticaux) qui ouvre un menu contextuel **uniquement visible pour les admins**.

Ce menu doit contenir :

### âœ… 1. â€œChanger le statutâ€
- Ouvre un `Dropdown` ou `Popover` avec les 4 statuts possibles :
  - Actif
  - Closed
  - Stand-by
  - Failed
- Quand lâ€™admin sÃ©lectionne un statut :
  - Appelle une route `PATCH /api/projets/:id/statut`
  - Met Ã  jour le statut cÃ´tÃ© front (sans recharger)
  - Affiche un toast â€œStatut mis Ã  jourâ€

### ğŸ§  Comportement :
- Si un projet nâ€™est **pas Actif**, il **nâ€™apparaÃ®t plus** dans la liste principale â€œMes dossiersâ€
- Ces projets seront affichÃ©s dans un autre onglet â€œHistoriqueâ€

---

### ğŸ—‘ï¸ 2. â€œSupprimer le projetâ€
- Ouvre une modale de confirmation :
Voulez-vous vraiment supprimer ce mandat ?
Cette action est irrÃ©versible.

php-template
Copier
Modifier
- Si confirmÃ© :
- Appelle `DELETE /api/projets/:id`
- Supprime la carte du DOM
- Affiche un toast â€œMandat supprimÃ©â€

---

### âš™ï¸ IntÃ©gration front :
- Le bouton `...` est visible **seulement si `user.role === 'admin'`**
- Utiliser un `DropdownMenu` Ã©lÃ©gant (ex : shadcn/ui, Headless UI, Radix UI)
- Exemple de structure :

```jsx
<DropdownMenu>
<DropdownMenuTrigger>
  <MoreVerticalIcon />
</DropdownMenuTrigger>
<DropdownMenuContent>
  <DropdownMenuItem onClick={() => openModalModifier()}>âœï¸ Modifier le projet</DropdownMenuItem>
  <DropdownMenuSub>
    <DropdownMenuSubTrigger>ğŸ”„ Changer le statut</DropdownMenuSubTrigger>
    <DropdownMenuSubContent>
      <DropdownMenuItem onClick={() => updateStatut("Actif")}>Actif</DropdownMenuItem>
      <DropdownMenuItem onClick={() => updateStatut("Closed")}>Closed</DropdownMenuItem>
      <DropdownMenuItem onClick={() => updateStatut("Stand-by")}>Stand-by</DropdownMenuItem>
      <DropdownMenuItem onClick={() => updateStatut("Failed")}>Failed</DropdownMenuItem>
    </DropdownMenuSubContent>
  </DropdownMenuSub>
  <DropdownMenuSeparator />
  <DropdownMenuItem className="text-red-600" onClick={openConfirmDeleteModal}>
    ğŸ—‘ï¸ Supprimer
  </DropdownMenuItem>
</DropdownMenuContent>
</DropdownMenu>
ğŸ” Backend Ã  prÃ©voir :
PATCH /api/projets/:id/statut
Body : { statut: "Closed" }

DELETE /api/projets/:id

âœ… RÃ©sultat attendu
ExpÃ©rience fluide et modulaire

Actions accessibles uniquement aux admins

Aucun blocage UI

Statuts mis Ã  jour sans recharger

Suppression propre et confirmÃ©e

yaml
Copier
Modifier
