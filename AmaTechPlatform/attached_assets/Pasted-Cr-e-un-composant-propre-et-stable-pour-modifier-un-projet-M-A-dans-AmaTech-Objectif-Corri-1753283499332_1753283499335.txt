CrÃ©e un composant propre et stable pour modifier un projet M&A dans AmaTech.

ğŸ¯ Objectif :
Corriger le bug de blocage en reconstruisant le composant "Modal de modification" de faÃ§on indÃ©pendante, modulaire et fiable.

ğŸ“¦ Stack : React + Tailwind CSS (ou shadcn/ui si utilisÃ©)

---

## ğŸ§± Architecture

CrÃ©e un composant React `<ProjetModal />` qui accepte les props suivantes :

```tsx
<ProjetModal
  open={isModalOpen}
  onClose={() => {
    setIsModalOpen(false);
    setProjetSelectionne(null);
  }}
  projet={projetSelectionne} // objet contenant les infos Ã  modifier
  mode="edit" // ou "create" dans le futur
/>
Le composant doit Ãªtre entiÃ¨rement contrÃ´lÃ© par les props. Aucun useState interne pour lâ€™ouverture/fermeture.

ğŸ§  Ã‰tat cÃ´tÃ© parent (ex. Dashboard.tsx)
tsx
Copier
Modifier
const [isModalOpen, setIsModalOpen] = useState(false);
const [projetSelectionne, setProjetSelectionne] = useState(null);

const handleEditClick = (projet) => {
  setProjetSelectionne(projet);
  setIsModalOpen(true);
};
Appelle ensuite :

tsx
Copier
Modifier
{isModalOpen && projetSelectionne && (
  <ProjetModal
    open={isModalOpen}
    projet={projetSelectionne}
    mode="edit"
    onClose={() => {
      setIsModalOpen(false);
      setProjetSelectionne(null);
    }}
  />
)}
ğŸ–¼ï¸ Structure interne du ProjetModal
Utilise Dialog de shadcn/ui ou un simple <div className="fixed inset-0">

Inclure :

Titre : â€œModifier les informations du mandatâ€

Champs prÃ©-remplis : nomClient, nomCode, typeMandat, etc.

Boutons :

â€œAnnulerâ€ â†’ appelle onClose()

â€œMettre Ã  jourâ€ â†’ valide les inputs, appelle un onSubmit(projet) (optionnel Ã  ce stade)

âš ï¸ Comportement crucial
âœ… Ã€ la fermeture (via âœ– ou "Annuler") :

onClose() doit Ãªtre appelÃ©

Aucun backdrop (<div class="fixed inset-0">) ne doit rester montÃ©

Le composant <ProjetModal /> doit Ãªtre dÃ©montÃ© du DOM

âœ… RÃ©sultat attendu
Aucun blocage dâ€™interaction aprÃ¨s fermeture

Pas de doublon de modal

Comportement 100% contrÃ´lÃ© par le parent

Reutilisable pour la crÃ©ation de projet plus tard (mode="create")

ğŸ’¡ Tips bonus :

Pour Ã©viter le backdrop bloquant : place tout le modal dans un <div className="z-50"> avec un backdrop z-40 qui disparaÃ®t si open === false

Tu peux encapsuler le tout dans un Portal si nÃ©cessaire (shadcn/ui le fait automatiquement)

