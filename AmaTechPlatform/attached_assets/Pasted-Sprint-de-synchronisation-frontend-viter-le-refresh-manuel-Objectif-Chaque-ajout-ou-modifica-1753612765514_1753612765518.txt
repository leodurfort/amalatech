Sprint de synchronisation frontend (Ã©viter le â€œrefresh manuelâ€)
ğŸ¯ Objectif
Chaque ajout ou modification (interaction, date teaser/NDA/IM/BP, etc.) doit immÃ©diatement mettre Ã  jour lâ€™interface, sans besoin de changer de page ni de recharger.

ğŸ§  Cause technique
Tu fais un POST vers le backend (âœ…)

Le backend sauvegarde bien les donnÃ©es (âœ…)

Mais tu nâ€™actualises pas le state local qui drive lâ€™interface (âŒ)

ğŸ”§ Solution gÃ©nÃ©rale
Option A â€“ Utilise SWR ou React Query
Si tu utilises SWR :

ts
Copier
Modifier
const { data, mutate } = useSWR(`/api/roadshow/${projectId}/data`);
â†’ AprÃ¨s un fetch rÃ©ussi :

ts
Copier
Modifier
await mutate(); // recharge les donnÃ©es cÃ´tÃ© client
Option B â€“ Mets Ã  jour localement le state
Si tu utilises useState, fais :

ts
Copier
Modifier
setInteractionCount(prev => prev + 1);
Ou dans un objet :

ts
Copier
Modifier
setRowData(prev => ({
  ...prev,
  [counterpartyId]: {
    ...prev[counterpartyId],
    nda: newDate
  }
}));
âœ… Ã€ appliquer aux composants suivants :
Action	Composant	Ce quâ€™il faut faire
Ajouter une interaction	Drawer ğŸ’¬	await fetch(), puis mutate() ou setCount()
Ajouter Teaser / NDA...	Colonne date	await fetch() + mise Ã  jour locale de la date
Meetings	idem relance	Ajouter au state local, ou mutate()
Phase 2 Toggle	case Ã  cocher	Mise Ã  jour locale du phase2_ok

âœï¸ Exemple React concret (modÃ¨le simple)
tsx
Copier
Modifier
const [teaserDate, setTeaserDate] = useState<string | null>(existingDate);

const handleTeaserSave = async (newDate: string) => {
  const res = await fetch(`/api/roadshow/${id}/event`, {
    method: "POST",
    body: JSON.stringify({ type: "teaser", event_date: newDate }),
    headers: { "Content-Type": "application/json" },
  });

  if (res.ok) {
    toast.success("Teaser enregistrÃ©");
    setTeaserDate(newDate); // met Ã  jour directement l'affichage
  }
};
ğŸ¯ RÃ©sultat attendu
Je clique sur â€œ+ Ajouterâ€ â†’ je choisis une date â†’ elle s'affiche directement.

Jâ€™ajoute une interaction â†’ le compteur passe de â€œÃ—2â€ Ã  â€œÃ—3â€ instantanÃ©ment.